<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>현재의 공간 — 오늘의 운세 & 행운 음료</title>

<!-- Pretendard 폰트 -->
<link rel="preconnect" href="https://cdn.jsdelivr.net" />
<link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet" />

<style>
  :root {
    --bg: #ffffff; --card: #ffffff; --ink: #1f2937; --muted: #6b7280;
    --accent: #16a34a; --accent-3: #d1fae5; --chip: #f3f4f6; --chip-text: #374151;
    --border: #e5e7eb; --shadow: 0 8px 28px rgba(0,0,0,.07); --radius: 18px;
  }
  * { box-sizing: border-box; }
  body {
    font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    background: var(--bg); color: var(--ink); margin: 0;
    -webkit-font-smoothing: antialiased;
  }
  .wrap { max-width: 680px; margin: 0 auto; padding: 24px 18px 32px; }
  
  /* 브랜드 영역 */
  .brand { display: flex; align-items: center; gap: 12px; margin: 6px 0 18px; }
  .brand img { width: 42px; height: 42px; object-fit: cover; border-radius: 10px; box-shadow: var(--shadow); background: #f3f4f6; }
  .brand h1 { font-size: 18px; margin: 0; font-weight: 700; letter-spacing: .3px; }

  /* 카드 공통 */
  .card { background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow); padding: 20px; margin: 16px 0; border: 1px solid var(--border); }
  .title { font-size: 22px; margin: 0 0 6px; font-weight: 800; word-break: keep-all; }
  .desc { color: var(--muted); line-height: 1.65; margin: 4px 0 0; word-break: keep-all; }

  .section-title { display: flex; justify-content: space-between; align-items: flex-start; gap: 12px; }
  
  /* 칩(뱃지) 스타일 */
  .chips { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px; }
  .chip { background: var(--chip); color: var(--chip-text); padding: 6px 10px; border-radius: 999px; font-size: 12px; }
  .chip .mono { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; letter-spacing: 1px; font-weight: 600; }
  .hint { color: var(--muted); font-size: 12px; margin-top: 8px; }

  /* 점수, 키워드 행 */
  .row { display: flex; justify-content: space-between; align-items: center; margin: 12px 0; }
  .left { display: flex; align-items: center; gap: 10px; }
  .ico { font-size: 18px; width: 22px; text-align: center; }

  /* 점수 바 */
  .bar { height: 10px; background: var(--accent-3); border-radius: 999px; overflow: hidden; margin-top: 6px; }
  .fill { height: 100%; background: var(--accent); transition: width 1s ease-out; width: 0; }

  /* 키워드 알약 */
  .pill { display: inline-flex; align-items: center; gap: 8px; background: #111827; color: #fff; border-radius: 999px; padding: 6px 12px; font-size: 13px; font-weight: 500; }
  .color-pill { background: #111827; }
  .swatch { width: 12px; height: 12px; border-radius: 50%; border: 1px solid rgba(255,255,255,.5); display: inline-block; }

  /* 음료 섹션 */
  .drink { display: flex; gap: 14px; align-items: center; margin-top: 12px; }
  .drink img { width: 72px; height: 72px; border-radius: 12px; object-fit: cover; background: #f3f4f6; box-shadow: var(--shadow); flex-shrink: 0; }
  .drink .name { font-size: 20px; font-weight: 800; margin-bottom: 4px; }
  .drink .note { color: var(--muted); font-size: 13px; word-break: keep-all; }

  /* 하단 */
  .foot { font-size: 12px; color: var(--muted); text-align: center; margin-top: 24px; line-height: 1.5; }
  .code { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; letter-spacing: 1px; }

  /* 버튼 */
  .btn { appearance: none; border: 0; background: var(--accent); color: #fff; border-radius: 12px; padding: 10px 14px; font-weight: 700; cursor: pointer; box-shadow: var(--shadow); font-size: 13px; white-space: nowrap; }
  .btn:active { transform: translateY(1px); opacity: 0.9; }

  /* 안내 박스 */
  .notice { display: flex; gap: 10px; align-items: flex-start; background: #ecfdf5; border: 1px dashed var(--accent); color: #065f46; padding: 14px; border-radius: 14px; font-size: 13px; line-height: 1.5; word-break: keep-all; }
</style>
</head>
<body>
<div class="wrap">
  <!-- 상단 로고 + 브랜드 네임 -->
  <div class="brand">
    <!-- 이미지가 없으면 엑박 대신 빈 박스가 보이도록 처리 -->
    <img src="logo.jpg" alt="로고" onerror="this.style.opacity=0.5">
    <h1>Present coffee</h1>
  </div>
   
  <!-- 운세 -->
  <div class="card">
    <div class="section-title">
      <div>
        <div class="title">오늘의 운세</div>
        <div id="fortuneText" class="desc">운세를 불러오는 중...</div>
      </div>
      <button id="shareBtn" class="btn">공유하기</button>
    </div>
    <div class="chips">
      <div class="chip">유효기간 <span id="validUntil" class="mono"></span></div>
      <div class="chip">확인코드 <span id="dailyCode" class="mono"></span></div>
    </div>
    <div class="hint">* 화면 캡처 지참 시 <b>3일 이내</b> 사용 가능</div>
  </div>

  <!-- 점수 (초록색 바) -->
  <div class="card">
    <div class="title">나의 점수</div>
    <div id="scores"></div>
  </div>

  <!-- 행운 키워드 -->
  <div class="card">
    <div class="title">행운 키워드</div>

    <div class="row">
      <div class="left"><span class="ico">🎟️</span><div>행운의 숫자</div></div>
      <div id="kwNumber" class="pill"></div>
    </div>

    <div class="row">
      <div class="left"><span class="ico">🧭</span><div>방향</div></div>
      <div id="kwDir" class="pill"></div>
    </div>

    <div class="row">
      <div class="left"><span class="ico">🎨</span><div>컬러</div></div>
      <div id="kwColor" class="pill color-pill"></div>
    </div>

    <div class="row">
      <div class="left"><span class="ico">🍽️</span><div>추천 음식</div></div>
      <div id="kwFood" class="pill"></div>
    </div>
  </div>

  <!-- 오늘의 행운 음료 -->
  <div class="card">
    <div class="title">오늘의 행운 음료</div>
    <div class="drink">
      <img id="drinkImg" alt="drink" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBmaWxsPSIjZTVlN2ViIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIvPjwvc3ZnPg=='"/>
      <div>
        <div id="drinkName" class="name"></div>
        <div id="drinkNote" class="note"></div>
      </div>
    </div>

    <div class="notice" style="margin-top:14px;">
      <div>💚</div>
      <div>
        <b>캡처 제시 시 추천 음료 1,000원 할인</b><br>
        (사용기한: <span id="validUntil2"></span> 23:59까지 · 코드 일치 시)
      </div>
    </div>
  </div>

  <div class="foot">
    페이지 생성 (KST): <span id="nowKST"></span><br/>
    지점/캠페인: <span id="shopId" class="code"></span>
  </div>
</div>

<script>
(function(){
  // ---- KST 시간 설정 ----
  const nowUTC = new Date();
  const nowKST = new Date(nowUTC.getTime() + 9*60*60*1000);
  const yyyy = nowKST.getUTCFullYear();
  const mm = String(nowKST.getUTCMonth()+1).padStart(2,'0');
  const dd = String(nowKST.getUTCDate()).padStart(2,'0');
  const todayStr = `${yyyy}-${mm}-${dd}`;

  // ---- URL 파라미터 ----
  const params = new URLSearchParams(location.search);
  const shop = (params.get('id') || 'default').toLowerCase();
  const useShuffle = (params.get('mode') === 'shuffle');

  // ---- 운세 데이터 (50개) ----
  const fortunes = [
    "오늘은 공간이 마음을 비추는 거울이 됩니다. 책상 위 불필요한 것을 한 번에 치우고, 의자를 창가 쪽으로 살짝 돌려보세요. 빛이 들어오는 각도가 달라지면 생각의 결도 달라집니다. 완벽한 계획보다 ‘지금 할 수 있는 한 가지’가 중요해요. 커피잔에서 올라오는 따뜻한 향을 깊게 들이마시고, 마음속 우선순위를 한 줄로 정리해 보세요. 여백이 생기는 자리마다 좋은 대화가 머무르고, 오늘의 선택은 차분하지만 단단한 행운으로 이어집니다.",
    "대화가 행운을 데려오는 날입니다. 말수가 적더라도 진심은 묵직하게 전해집니다. 상대의 속도를 먼저 맞추고, 내 감정을 한 박자 늦게 꺼내보세요. 커피를 천천히 식히듯, 서두르지 않는 마음이 신뢰를 키웁니다. 듣는 동안 메모 한 줄을 남겨두면 오후의 결정이 놀라울 만큼 가벼워질 거예요. 대단한 말솜씨가 아니어도 괜찮습니다. 따뜻하게 머무른 대화의 온도만으로도 오늘은 충분히 좋은 방향으로 흘러갑니다.",
    "오늘은 향기가 기억을 천천히 데려오는 날입니다. 익숙한 원두 향 속에서 어제의 고민이 다른 빛으로 보일 수 있어요. 감정이 복잡할수록 속도를 줄이고, 가장 단순한 질문 하나만 남겨보세요. ‘지금 나에게 필요한 건 무엇일까.’ 그 답은 의외로 가까운 곳에 있습니다. 따뜻한 머그컵의 온기처럼 손끝에서부터 마음이 풀릴 거예요. 지나간 장면을 미화하지도, 과도하게 걱정하지도 말고, 오늘의 호흡을 믿어보세요.",
    "빛과 그림자가 조화롭게 섞이는 하루입니다. 창가 쪽 자리를 골라 앉아 커피 표면에 비치는 작은 파동을 바라보세요. 완벽히 잔잔하지 않아도 그 결은 충분히 아름답습니다. 일도 사람도 그런 법이죠. 모난 부분은 여백으로 감싸고, 오늘 할 수 있는 만큼만 해도 괜찮습니다. 균형은 의지로 만드는 것이 아니라 속도를 조절하며 만들어지는 거예요. 천천히, 그러나 꾸준히—그 리듬이 행운을 불러옵니다.",
    "공간을 살짝 바꾸면 마음이 새로워집니다. 메뉴판을 한 번 더 훑어보듯, 오늘의 계획도 다시 읽어 보세요. 삭제할 일 두 가지, 반드시 할 일 한 가지를 정하면 일정이 놀랍도록 가벼워집니다. 커피 한 모금 뒤에 오는 짧은 멈춤처럼, 결정의 순간마다 3초만 쉬어가도 선택의 질이 달라져요. 주변의 눈치보다 내 호흡을 믿으세요. 조용한 확신이 하루를 이끌고, 작은 성공이 저녁을 환하게 비출 거예요.",
    "오늘은 ‘비움’이 행운의 방식입니다. 폴더 하나를 정리하고, 마음속 체크리스트에서 당장 하지 않아도 되는 일을 지워보세요. 남은 한 줄이 선명해질수록 에너지는 한곳으로 모입니다. 커피의 쓴맛과 단맛이 균형을 이루듯, 해야 할 것과 하지 않을 것의 경계를 뚜렷이 나누면 속도가 붙습니다. 비움은 포기가 아니라 선택의 다른 이름. 가벼워진 발걸음이 당신을 좋은 사람과 좋은 타이밍으로 데려갈 거예요.",
    "사람을 통해 기회가 들어오는 날입니다. 오랜만에 떠오른 이름이 있다면 짧게 안부를 남겨보세요. 형식적인 메시지여도 괜찮습니다. 관계는 그 자체로 시간의 용기를 품고 있어요. 커피를 건네듯 자연스러운 한 문장이 연결의 문을 엽니다. 부탁보다 먼저 감사와 응원을 보내면 신뢰의 씨앗이 심어져요. 오늘의 친절은 곧 당신에게 돌아옵니다. 작은 연결이 내일의 뜻밖의 제안으로 이어질 수 있어요.",
    "리듬이 중요한 하루입니다. 집중 40분, 휴식 10분의 간단한 규칙만 지켜도 생산성이 눈에 띄게 달라질 거예요. 타이머를 맞춰두고 커피가 식기 전에 한 블럭만 밀어붙이세요. 그다음엔 창밖을 바라보며 숨을 고르세요. 느리게 가는 시간이 오히려 멀리 데려다줍니다. 성과는 양이 아니라 리듬에서 나옵니다. 오늘 당신의 호흡이 일정 전체의 표정을 바꿀 거예요. 꾸준함은 가장 세련된 행운의 기술입니다.",
    "감정이 살짝 예민해질 수 있는 날입니다. 그래서 더 부드럽게 다루어야 할 대상은 ‘나 자신’입니다. 실수 하나에 마음을 몰아세우지 말고, 잘한 일 한 가지를 크게 칭찬해 주세요. 커피 크레마가 잔 위에서 잠깐 머무르듯, 자기 격려의 시간도 의식적으로 잠깐 머물러야 합니다. 마음이 안정되면 판단도 선명해져요. 오늘의 온화함이 관계의 톤을 바꾸고, 당신의 하루를 한층 더 따뜻하게 지켜 줄 거예요.",
    "오늘은 ‘느림의 미학’을 실험하기 좋습니다. 회의실로 가는 길을 한 블록 돌아가 보세요. 보도블록의 질감, 나무 냄새, 간판의 색이 기분을 새로 고칩니다. 생각은 때때로 몸의 속도를 따라가요. 커피가 식는 과정을 기다릴 줄 아는 사람처럼, 결정도 그만큼 향기로워집니다. 마음의 잡음이 잦아들면 해야 할 말과 하지 않아도 될 말이 갈립니다. 느림은 당신을 더 정확한 행운으로 인도합니다.",
    "계절의 온도가 피부에 또렷이 느껴지는 날입니다. 바람이 전해주는 미세한 냄새와 빛의 색이 오늘의 감정을 정돈해 줍니다. 창가 자리에서 머그컵을 양손으로 감싸 쥐고, 숨을 한 번 길게 내쉬어 보세요. 천천히, 그러나 확실하게 침착함이 돌아옵니다. 그 침착함 덕분에 오후의 협상과 대화가 부드럽게 흐를 거예요. 계절이 바뀌듯 마음도 단단히 새로워집니다. 오늘의 차분함은 장기적인 행운을 부릅니다.",
    "아이디어가 필요한 분께는 ‘관찰’이 최고의 도구가 됩니다. 메뉴판의 글자 간격, 컵 가장자리의 광택, 사람들의 동선처럼 사소한 디테일을 기록해 보세요. 영감은 특별한 순간이 아니라 반복된 일상에서 자랍니다. 커피 양을 1g 줄였을 때 맛이 미묘히 달라지듯, 생각도 아주 작은 조정에서 방향을 틉니다. 관찰은 곧 가능성입니다. 오늘 적어둔 메모가 며칠 뒤 놀라운 제안으로 자라날 거예요.",
    "오늘은 ‘정직한 페이스’가 최고의 전략입니다. 남의 속도를 부러워하기보다 나만의 페이스를 지키세요. 커피를 급히 마시면 향을 놓치듯, 일을 서두르면 결과의 풍미가 옅어집니다. 단계별로 작은 완성들을 쌓아 올리면 피로는 적고 만족은 커져요. 남과 비교하는 순간 동력이 빠르게 소모됩니다. 오늘의 행운은 어제의 나보다 한 걸음 나아간 데서 시작됩니다. 당신의 속도가 곧 당신의 품격입니다.",
    "도움과 요청의 균형이 빛나는 날입니다. 혼자 끙끙대던 일을 한 문장으로 정리해 주변에 공유해 보세요. 정확한 부탁은 선의의 참여를 부릅니다. 커피를 나눌 때 잔의 높이를 맞추듯, 대화의 눈높이를 맞추면 협업은 놀라울 만큼 부드러워집니다. 덕분에 당신의 부담은 줄고, 프로젝트의 속도는 올라가요. 함께 나누는 수고는 결국 함께 누리는 성취가 됩니다. 당신은 그 중심을 부드럽게 잡을 수 있어요.",
    "감사의 표현이 복리처럼 불어나는 하루입니다. 문을 잡아 준 손길, 먼저 보낸 메시지, 보이지 않는 배려에 짧게라도 고마움을 전하세요. 그 말 한마디가 오늘의 공기를 바꿉니다. 감사는 가장 빠르게 신뢰를 쌓는 기술이자 가장 오래 남는 여운입니다. 커피 한 잔 값의 친절이 때로는 큰 기회를 부르기도 해요. 작은 감사가 모여 당신의 이름 옆에 ‘함께 일하고 싶은 사람’이라는 별표를 붙여 줄 거예요.",
    "일의 핵심은 ‘정리된 시작’입니다. 첫 페이지 상단에 오늘의 목표를 한 줄로 쓰고, 그 아래에 방해 요소를 두 줄로 적어 보세요. 시작 전 3분의 정리가 작업 시간 30분을 아껴 줍니다. 커피 필터를 접듯 흐름을 단정히 잡아주면 결과물이 놀랍도록 깨끗해져요. 정리는 재능의 대체제가 아니라 재능을 빛나게 하는 프레임입니다. 오늘의 깔끔한 출발이 저녁의 성취감을 높여 줄 거예요.",
    "마음의 체온을 올려 주는 건 거창한 이벤트가 아니라 작은 의식입니다. 오픈 전 음악 한 곡, 첫 잔 스팀의 소리, 따뜻한 인사 한 문장이 하루의 분위기를 결정합니다. 의식은 반복될수록 깊은 안정감을 선물합니다. 흔들리는 순간마다 그 의식으로 되돌아오세요. 커피 머신의 예열처럼 마음도 준비가 되면 어떤 주문도 침착히 받아낼 수 있어요. 오늘의 의식은 당신을 가장 단단한 버전으로 세워 줍니다.",
    "비가 오든 햇살이 강하든 오늘의 날씨는 감정의 배경음일 뿐, 주인공은 당신입니다. 날씨 탓에 흐려지던 계획을 실내 루틴으로 바꿔 보세요. 창가 대신 안쪽 테이블, 산책 대신 스트레칭, 야외 촬영 대신 글 정리 같은 식으로요. 조건에 흔들리지 않는 태도는 곧 신뢰가 됩니다. 커피가 다양한 기구로도 제 맛을 내듯, 당신의 하루도 도구와 방법을 바꾸면 충분히 빛날 수 있어요.",
    "오늘은 ‘기록’이 행운의 지름길입니다. 떠오르는 문장을 핸드폰 메모에 한 줄씩 붙잡아 두세요. 메모는 영감의 냉장고—지금 바로 먹지 않아도 나중에 꺼내어 훌륭한 레시피가 됩니다. 사진 한 장, 음성 기록 10초도 좋아요. 기록이 쌓이면 우연은 패턴이 되고, 패턴은 전략이 됩니다. 내일의 나에게 줄 선물처럼, 작은 기록을 남기세요. 당신의 방향감각이 놀랄 만큼 정확해질 거예요.",
    "혼자만의 시간이 필요한 분이라면 오늘은 ‘조용한 자리’가 답입니다. 소음을 한 단계 줄이고, 알림을 잠시 묵음으로 바꿔 보세요. 한 시간이면 충분해요. 그 고요 속에서 해야 할 말과 하지 않아도 될 말이 분리되고, 마음의 결이 다시 매끈해집니다. 외로움이 아니라 집중의 고요를 선택하세요. 커피 향이 은근히 번지듯, 당신의 영향력도 조용히 넓어질 거예요. 침착함이 결국 모든 걸 이깁니다.",
    "새로운 시도를 하기 좋은 날입니다. 완벽한 준비보다 작은 베타 버전이 더 멀리 갑니다. 샘플 한 잔을 내어보듯, 아이디어도 가볍게 테스트해 보세요. 피드백은 때로 아프지만 대부분 유익합니다. 그 한 번의 시도가 방향을 크게 수정해 줘요. 실패의 비용은 생각보다 작고, 배움의 보상은 오래 남습니다. 오늘의 실험정신이 한 달 뒤 당신의 자신감 지수를 바꿉니다.",
    "관계에서 지켜야 할 선을 단정히 긋는 날입니다. 친절함과 예스맨은 다릅니다. 불편한 부탁에는 ‘지금은 어렵다’고 말해도 괜찮아요. 커피 농도를 조절하듯, 에너지의 농도를 스스로 정하세요. 경계는 차갑기 위해서가 아니라 따뜻함을 오래 지키기 위해 필요합니다. 스스로를 지켜낸 사람만이 타인에게도 진짜 친절할 수 있어요. 오늘의 단호함이 내일의 평온을 보장합니다.",
    "열심히 하는 것만큼 잘 쉬는 것도 실력입니다. 잠깐의 산책, 스트레칭, 좋아하는 음악 한 곡이 업무 효율을 되살립니다. 커피 리필이 허용되듯, 에너지 충전도 당연한 권리예요. 휴식은 게으름이 아니라 성능 최적화입니다. 쉬는 시간을 일정에 처음부터 넣어 두면 죄책감이 사라지고, 집중이 두 배가 됩니다. 오늘의 여유가 결과의 밀도를 높여 줄 거예요.",
    "스스로에 대한 기대치를 현실적으로 조정할수록 성취감은 커집니다. 오늘의 목표를 ‘완벽’이 아니라 ‘진전’으로 정의해 보세요. 100 중 70을 해도 잘한 날이고, 30을 배웠다면 더 잘한 날입니다. 커피 한 잔에도 산미와 단맛이 공존하듯, 성취와 배움이 함께 있어야 다음 단계로 갑니다. 기대를 현명하게 낮추면 만족은 자연히 높아집니다. 당신은 충분히 잘하고 있어요.",
    "오늘은 ‘첫 인상’이 중요한 날입니다. 메일의 제목, 문서의 표지, 발표의 첫 문장에 시간을 더 쓰세요. 첫 향이 좋으면 끝 맛도 좋아집니다. 포인트는 과장이 아니라 선명함. 하고 싶은 말의 핵심을 한 문장으로 정리해 시작해 보세요. 상대는 그 명료함에 안심합니다. 인상은 신뢰의 문턱입니다. 오늘의 또렷한 시작이 문을 활짝 열어 줄 거예요.",
    "작은 정성이 큰 감동을 부르는 날입니다. 손 글씨로 적은 짧은 메모, 머그컵 워머를 먼저 내어주는 세심함, 예약 시간 5분 전의 안부가 사람의 마음을 움직여요. 감동은 비용보다 마음을 더 크게 요구합니다. 그러나 그 대가는 오래 남는 믿음이죠. 오늘 베푼 세심함은 브랜드가 되고, 당신의 이름 옆에 신뢰라는 향기를 남깁니다. 결국 디테일이 모든 것을 결정합니다.",
    "우연처럼 보이는 사건 뒤에는 보통 꾸준함이 숨어 있습니다. 오늘의 루틴을 소홀히 하지 마세요. 오픈 체크리스트, 위생 점검, 데이터 기록 같은 단순한 절차가 기회를 불러옵니다. 커피 농도가 일정해야 맛이 보장되듯, 반복의 품질이 결과의 품질을 만듭니다. 지루함 속에서 프로가 태어납니다. 오늘도 묵묵히 지킬 것들을 지키는 당신에게 행운은 반드시 찾아옵니다.",
    "자존감이 흔들릴 땐 비교를 멈추고 감사를 시작하세요. 다섯 가지 고마운 일을 적어보면 마음의 초점이 즉시 바뀝니다. 감사는 현실을 미화하는 게 아니라 시야를 넓히는 기술입니다. 커피가 컵 모양에 따라 다른 인상을 주듯, 시선의 위치가 느낌을 바꿉니다. 지금 가진 것 위에서 한 걸음만 내디디세요. 고마움은 이상하게도 다음 선물을 재촉합니다.",
    "오늘은 ‘정확한 마감’이 복이 되는 날입니다. 대충 넘긴 디테일 하나가 내일의 큰 수정으로 돌아올 수 있어요. 끝을 단단히 묶고 넘어가세요. 바스켓을 평평히 다지는 것만으로도 추출이 달라지듯, 마무리의 정성이 결과를 바꿉니다. 체크리스트 마지막 칸에 체크하는 순간, 마음의 긴장도 풀립니다. 깔끔한 마감은 다음 작업의 좋은 예열이 됩니다.",
    "상대의 의도를 오해하기 쉬운 날이라면, 메시지를 더 길게 쓰지 말고 더 선명하게 쓰세요. 질문을 나열하고, 원하는 결론을 분명히 제시하면 갈등이 줄어듭니다. 거친 말투보다 담백한 구조가 훨씬 설득력 있어요. 커피 노트를 정리하듯 커뮤니케이션도 노트를 남기세요. 기록은 감정의 흔들림을 줄이고, 함께 일하는 사람을 편안하게 만듭니다.",
    "금전 운이 필요한 분께는 ‘가시화’가 해답입니다. 이번 달 비용과 수입을 한 화면에 그려 보세요. 숫자가 보이면 판단이 쉬워집니다. 무지성 절약보다 의미 있는 지출 줄이기가 더 큰 효과를 냅니다. 커피 원가를 정확히 알 때 가격도 자신 있게 설명하듯, 데이터는 자신감의 근거입니다. 오늘의 가시화가 다음 달의 여유를 만들어 줄 거예요.",
    "체력 관리가 곧 운 관리입니다. 20분만 땀을 내도 오후의 집중력이 달라집니다. 카페 공간을 넓게 한 바퀴 걷고, 어깨와 손목을 부드럽게 풀어주세요. 바쁜 날일수록 몸을 돌보는 사람이 결국 끝까지 웃습니다. 커피 머신을 주기적으로 백플러싱하듯, 몸도 정기적으로 리셋해야 성능을 유지합니다. 오늘의 움직임이 내일의 버팀목이 됩니다.",
    "실수는 배움을 동반합니다. 중요한 건 그 실수를 ‘체계’로 환산하는 일입니다. 체크리스트 한 줄, 자동 알림 한 개만 추가해도 같은 실수는 재현되지 않아요. 커피 레시피가 공개되어도 손맛의 차이가 나는 이유는 일관성에 있습니다. 당신의 시스템은 곧 당신의 품질입니다. 오늘의 교정이 내일의 칭찬으로 돌아올 거예요. 자신을 믿고 다시 시도하세요.",
    "오늘은 색채가 기분을 바꿉니다. 머그의 색, 노트의 색, 화면의 테마를 한 톤 밝게 바꿔 보세요. 공간의 색이 달라지면 마음의 문이 먼저 열립니다. 시각 자극은 생각보다 강력한 동기입니다. 커피 체리의 붉음이 긴 수고를 보상하듯, 작은 색의 변화가 하루의 분위기를 새롭게 물들입니다. 당신에게 어울리는 색을 고르는 일 자체가 이미 행운입니다.",
    "소음 속에서도 나만의 소리를 찾을 수 있는 날입니다. 음악 재생 목록을 오늘의 기분에 맞게 가볍게 손봐 보세요. 리듬이 곧 집중입니다. 바쁜 시간에도 박자를 잃지 않으면 실수는 줄고 재미는 늘어납니다. 커피 탬핑의 일정한 압처럼 마음의 일정한 비트가 필요해요. 당신의 페이스를 귀로 지휘하세요. 일의 흐름이 음악처럼 자연스럽게 이어집니다.",
    "의견이 부딪히는 순간이 오더라도 걱정하지 마세요. 충돌은 방향을 찾기 위한 자연스러운 과정입니다. 감정의 높이를 낮추고 사실의 높이를 올리면 합의점이 보입니다. 컵의 용량을 먼저 확인하듯, 서로의 한계를 인정하는 데서 대화는 시작됩니다. 오늘의 성숙한 태도는 며칠 뒤 기억될 최고의 칭찬이 됩니다. 당신은 관계의 온도를 지킬 수 있는 사람입니다.",
    "아이디어가 막힐 땐 손을 먼저 움직이세요. 포스트잇 여섯 장에 아무 생각이나 적고 벽에 붙여 보세요. 몸이 움직이면 생각도 따라옵니다. 커피 분쇄도를 한 단계만 바꿔도 맛이 달라지듯, ‘방식’의 변화가 ‘내용’을 바꿉니다. 정답을 찾기보다 후보를 늘리는 전략이 유효합니다. 오늘의 거칠고 많은 초안이 내일의 단단한 한 문장으로 응고될 거예요.",
    "스스로에게 친절할수록 타인에게도 여유가 생깁니다. 오늘 하루의 난이도를 마음속으로 ‘보통’으로 설정해 보세요. 기대를 현실에 맞추면 성취감은 커지고 피로는 줄어듭니다. 커피의 산미를 즐기려면 단맛이 필요하듯, 긴장에는 반드시 쉼이 필요합니다. 나에게 허락한 관용이 결국 주변을 편안하게 합니다. 당신의 부드러움이 오늘의 가장 큰 힘입니다.",
    "집중해야 할 시간이 있다면 문장으로 선언하세요. “오후 2~4시는 깊은 작업 시간입니다.” 주변에 알려두고 알림을 꺼 보세요. 경계가 지켜질 때 품질은 오른다—아주 단순하지만 강력한 진리입니다. 커피 추출이 방해받으면 향이 깨지듯, 집중도 쉽게 산란해집니다. 자신을 위한 경계는 이기심이 아니라 전문성입니다. 당신의 시간은 존중받을 가치가 충분해요.",
    "오늘은 배우는 사람에게 유독 친절한 날입니다. 튜토리얼 한 편, 강의 두 챕터만 들어도 시야가 넓어집니다. 배움은 당장의 효율보다 장기적인 품격을 가져옵니다. 수확보다 뿌리가 먼저인 법이죠. 커피 생두가 먼 길을 건너와 한 잔의 풍미가 되듯, 오늘의 학습이 언젠가 놀라운 결과로 추출됩니다. 당신의 성장 곡선은 지금도 조용히 상승 중입니다.",
    "감정 소모가 큰 일을 앞두고 있다면 ‘준비의 의식’을 만드세요. 물 한 잔, 짧은 스트레칭, 깊은 호흡 세 번이면 충분합니다. 의식은 마음의 스위치입니다. 커피 머신의 예열이 안정적인 추출을 보장하듯, 당신의 의식이 대화의 품질을 높여 줍니다. 준비된 마음은 흔들려도 쉽게 무너지지 않아요. 당신은 이미 절반을 이겼습니다. 나머지는 침착함이 해낼 거예요.",
    "오늘은 ‘선택의 날’입니다. 모든 걸 붙잡을 수는 없어요. 중요한 두 가지를 남기고, 나머지는 다음으로 미루세요. 선택은 상실이 아니라 집중입니다. 커피 한 잔을 고르는 데도 수많은 취향이 있듯, 당신의 선택에도 당신만의 논리가 있습니다. 남의 기준에 흔들리지 말고, 나의 기준을 단정히 세우세요. 분명한 선택이 결국 분명한 결과를 부릅니다.",
    "주변이 시끄러울수록 유머가 필요합니다. 가벼운 농담 하나, 미소 한 번이 공기의 난기를 순식간에 바꿉니다. 유머는 문제를 축소하지 않지만, 해결의 여지를 넓혀 줍니다. 스팀의 치직거림처럼 잠깐의 소란 뒤에는 늘 평온이 돌아옵니다. 오늘의 가벼움은 결코 가벼운 결과를 낳지 않아요. 마음의 탄력성이 당신을 끝까지 안전하게 데려다 줄 겁니다.",
    "성공의 기준을 ‘완료’로 바꿔 보세요. 퀄리티는 다음 반복에서 올려도 됩니다. 오늘의 목표는 마침표를 찍는 것. 커피 레시피도 수십 번의 조정 끝에 완성되듯, 결과는 반복의 산물입니다. 미완을 두려워하지 말고, 일단 끝내고 다음을 기약하세요. 완료는 자신감을, 자신감은 다음 도전을 부릅니다. 당신의 엔진이 가장 좋아하는 연료는 ‘끝냈다’는 사실입니다.",
    "오늘은 손님이든 동료든 ‘이름’을 불러 주세요. 이름은 사람에게 가장 따뜻한 호칭입니다. 관계의 거리가 순간적으로 줄어들고, 신뢰의 씨앗이 심어집니다. 작은 호칭 하나가 서비스의 격을 올립니다. 커피의 첫 향이 기억을 결정하듯, 첫 호칭이 관계의 톤을 결정합니다. 정중한 눈맞춤과 함께 이름을 부르면 그 순간, 당신의 하루에도 작지만 확실한 행운이 피어납니다.",
    "판단이 어려울 땐 ‘시간의 테스트’를 거치세요. 중요한 결정은 24시간 보류, 사소한 일은 즉시 처리—이 간단한 규칙이 피로를 줄입니다. 커피의 블룸처럼 잠깐의 기다림이 전체 맛을 결정하듯, 결정도 숨을 고를 여유가 필요합니다. 급함이 만든 후회보다 느림이 만든 확신이 낫습니다. 오늘의 신중함이 내일의 시간을 아껴 줄 거예요.",
    "몸의 신호를 무시하지 마세요. 목이 뻐근하면 컵을 내려놓고 목 스트레칭, 손목이 뻐근하면 텀블러를 바꾸는 식의 작은 조정이 큰 문제를 예방합니다. 장비를 아끼듯 몸도 아껴야 합니다. 커피가 좋은 물을 만나야 맛이 살아나듯, 좋은 일도 건강한 몸에서 나옵니다. 오늘의 사소한 관리가 일주일의 컨디션을 지켜 줄 거예요. 당신은 자신을 돌볼 자격이 있습니다.",
    "칭찬은 빠르고 구체적으로—오늘의 소통 규칙입니다. “수고했어요”보다 “오늘 장표 3번의 구조가 특히 명확했어요”가 더 큰 동기를 줍니다. 구체성은 진심의 증거입니다. 커피 노트에 산미·바디·애프터를 나누어 기록하듯, 칭찬도 요소를 분해하면 힘을 얻습니다. 당신의 세심한 인식이 팀의 사기를 끌어올립니다. 덕분에 오후 공기가 한결 가벼워질 거예요.",
    "예상과 다른 흐름이 찾아와도 괜찮습니다. 변수는 실패가 아니라 이야기의 긴장입니다. 스케줄의 여백이 해답이 됩니다. 한 타임 미루고, 동선을 조정하고, 메뉴를 대체하면 대부분의 문제는 풀립니다. 커피 생두의 산지가 바뀌어도 최종 맛을 맞추는 건 결국 사람의 손이에요. 유연함은 최고의 노하우입니다. 오늘의 당신은 충분히 유연하고 능숙합니다.",
    "자신의 취향을 또렷이 인정하는 날입니다. 산미를 좋아하면 산미를, 묵직함을 좋아하면 묵직함을. 취향은 고집이 아니라 정체성입니다. 나의 취향을 설명할 수 있을 때 타인의 취향도 존중할 수 있어요. 커피가 다양한 만큼 사람도 다양합니다. 맞고 틀림이 아니라 어울림의 문제죠. 오늘의 솔직함이 의외의 공감과 깊은 연결을 만들어 줄 거예요.",
    "작업 공간 한 구석에 ‘회복 스테이션’을 만들어 보세요. 향 좋은 핸드크림, 따뜻한 담요, 작은 간식 하나만으로도 회복 속도가 달라집니다. 스스로를 잘 돌보는 사람이 일도 오래, 관계도 길게 가져갑니다. 커피 원두도 적정 습도에서 제 맛을 내듯, 사람도 적정 배려 속에서 빛납니다. 당신을 위한 작은 친절이 오늘의 가장 큰 생산성을 선물합니다.",
    "숫자가 부담스럽다면 ‘시각화’를 시도하세요. 목표를 원형 차트, 진행도를 막대로 그려보면 동기부여가 올라갑니다. 뇌는 이야기를 좋아하고, 눈은 리듬을 좋아합니다. 커피 추출 그래프를 보면 맛의 변화를 예측하듯, 당신의 그래프도 다음 선택을 선명하게 보여줄 거예요. 오늘 그려 둔 도표가 내일의 피로를 크게 줄여 줄 겁니다.",
    "오해를 피하고 싶다면 ‘재확인’이 해답입니다. “제가 이해한 바로는 … 맞을까요?”라는 한 문장이 불필요한 수정과 감정을 예방해 줍니다. 재확인은 불신이 아니라 프로의 습관입니다. 커피 주문을 복창하듯 일의 주문도 복창하면 정확해집니다. 당신의 신중함이 신뢰를 만들고, 신뢰가 곧 기회가 됩니다. 오늘의 꼼꼼함이 미래의 편안함을 보장합니다.",
    "환경을 탓하고 싶어지는 순간마다 ‘내가 바꿀 수 있는 한 칸’을 찾으세요. 조명 각도, 의자 높이, 단축키 설정 같은 사소한 변화가 체감 효율을 끌어올립니다. 커피도 분쇄 한 클릭 차이가 결과를 바꾸듯, 일도 미세 조정이 본질을 바꿉니다. 불평 대신 조정을 선택하는 사람에게 기회는 더 자주 찾아옵니다. 오늘의 한 칸이 당신의 내일을 넓힙니다.",
    "하루의 마지막은 반드시 ‘정리’로 마감하세요. 내일의 첫 목표와 시작 시간을 적고, 책상을 비워둡니다. 아침의 나에게 선물을 남기는 셈이죠. 커피 머신을 꺼도 다음 날 첫 예열이 빠른 것처럼, 정리된 밤은 빠른 아침을 약속합니다. 마감의 품격이 하루의 품격을 결정합니다. 오늘의 깔끔한 작별 인사가 내일의 반가운 인사를 부를 거예요.",
    "누군가의 실수 앞에서 보인 당신의 태도가 곧 당신의 레벨입니다. 문제를 사람과 분리해 다루고, 해결을 먼저 제시하세요. 책임을 묻는 말보다 재발을 막는 장치가 더 큰 신뢰를 만듭니다. 커피 가루가 흘렸다면 먼저 닦고, 그다음 깔때기를 준비하면 됩니다. 당신의 성숙함은 오래 기억될 미덕입니다. 오늘의 너그러움이 미래의 동료를 데려옵니다.",
    "좋은 소식이 필요한 날이라면 ‘내가 좋은 소식이 되기’를 시도하세요. 칭찬, 응원, 작은 도움을 먼저 건네면 공기의 밀도가 바뀝니다. 세상은 선물처럼 돌아옵니다. 커피 쿠폰 한 장이 만들어내는 미소처럼, 당신의 작은 호의가 의외의 문을 열 거예요. 오늘의 선행은 통계적으로도 당신 편입니다. 선한 영향력은 생각보다 빠르게 복리로 쌓입니다.",
    "가끔은 아무 말도 하지 않는 것이 가장 큰 지혜입니다. 침묵은 비겁함이 아니라 선택입니다. 감정이 올라오는 순간, 물 한 모금과 함께 10초만 참아 보세요. 그 사이에 사소한 싸움이 큰 오해로 번지는 일을 막을 수 있습니다. 커피의 여운처럼, 말도 여운이 필요합니다. 오늘의 절제는 당신을 품격 있게 보이게 하고, 관계의 수명을 길게 만들어 줍니다.",
    "새로운 만남에 행운이 있습니다. 소개받은 자리, 우연히 스친 인연을 가볍게 붙잡아 보세요. 명함 한 장과 진심 어린 인사면 충분합니다. 첫인상의 핵심은 완벽함이 아니라 편안함이에요. 커피향이 강하지 않아도 오래 남듯, 담백한 태도는 오래 기억됩니다. 오늘의 연결은 바로 성과가 아니어도 괜찮습니다. 시간이 지나며 큰 선물로 돌아올 가능성이 높습니다.",
    "스스로에 대한 농담을 한 스푼 섞어 보세요. 완벽주의의 각을 둥글게 만드는 데 유머만 한 약이 없습니다. 실수했을 때 먼저 웃는 사람이 결국 분위기를 주도합니다. 커피 폼이 살짝 넘쳤다면 그 컵의 여유로 이야기를 시작하면 됩니다. 가벼움은 진지함의 적이 아니라 친구예요. 오늘의 유연함이 당신을 가장 매력적인 사람으로 보이게 할 겁니다.",
    "끝으로 갈수록 에너지가 떨어진다면 ‘보상’을 예약하세요. 작업 완료 뒤 좋아하는 디저트, 산책, 영상 한 편 같은 작은 기쁨을 약속합니다. 기대는 추진력입니다. 커피 한 잔을 떠올리며 오후를 버티듯, 보상이 앞에 있으면 집중은 길어집니다. 오늘의 뚜렷한 보상이 내일의 지속성을 보장합니다. 당신은 충분히 해낼 수 있고, 해내고 나면 반드시 더 행복해질 거예요."
  ];

  // ---- 키워드/음료 (컬러는 '색상명'으로 표기) ----
  const directions = ["동쪽","서쪽","남쪽","북쪽","동남쪽","서남쪽","동북쪽","서북쪽"];

  const colorOptions = [
    {key:"forest", name:"포레스트 그린", hex:"#2e7d32"},
    {key:"rose",   name:"로즈 핑크",   hex:"#f472b6"},
    {key:"peach",  name:"피치 오렌지", hex:"#fb923c"},
    {key:"vanilla",name:"바닐라 크림", hex:"#f5e6c8"},
    {key:"mint",   name:"민트 블루",   hex:"#99f6e4"},
    {key:"choco",  name:"초코 브라운", hex:"#6b3f2a"}
  ];

  const foods = [
    "소갈비", "파스타", "마카롱", "연어샐러드", "김치볶음밥", "크루아상",
    "티라미수", "브라우니", "치즈케이크", "샌드위치", "바게트", "스콘",
    "샐러드", "와플", "팬케이크", "베이글", "초코칩쿠키", "치킨샐러드",
    "리조또", "라자냐", "버섯크림파스타", "망고빙수", "딸기케이크",
    "딸기초코케이크", "딸기요거트케이크", "프렌치토스트",
    "사과케이크", "땅콩케이크", "밤케이크", "초코케이크", "치킨"
  ];

  // [수정] 아래 리스트에서 콤마(,)가 빠져 오류가 발생했었습니다. 수정 완료되었습니다.
  const drinks = [
    {name:"아메리카노",     img:"logo.jpg", note:"와이니한 향과 깔끔한 산미가 인상적인 아메리카노"},
    {name:"카페라떼",       img:"logo.jpg", note:"부드러운 우유와 깔끔한 에스프레소가 어우러진 라떼"},
    {name:"바닐라라떼",     img:"logo.jpg", note:"은은한 바닐라 향이 감도는 달콤하고 부드러운 라떼"},
    {name:"헤이즐넛라떼",   img:"logo.jpg", note:"고소한 헤이즐넛 향과 진한 에스프레소의 조화"},
    {name:"아인슈페너",     img:"logo.jpg", note:"부드러운 크림 위에 쌉싸름한 에스프레소가 어우러진 커피"},
    {name:"초코라떼",       img:"logo.jpg", note:"진한 초콜릿 풍미가 입안을 부드럽게 감싸는 달콤한 라떼"},
    {name:"말차라떼",       img:"logo.jpg", note:"쌉싸름한 말차와 고소한 우유가 어우러진 균형 잡힌 라떼"},
    {name:"밀크티",         img:"logo.jpg", note:"진하게 우려낸 홍차에 부드러운 우유가 더해진 클래식한 밀크티"},
    {name:"화분스무디",     img:"logo.jpg", note:"초코 크럼블이 토핑된 달콤하고 시원한 디저트 스무디"},
    {name:"히치아이스티",   img:"logo.jpg", note:"상큼한 과일 향과 깔끔한 단맛이 어우러진 아이스티"},
    {name:"애플티",         img:"logo.jpg", note:"사과의 달콤함과 은은한 향이 퍼지는 따뜻한 티"},
    {name:"에메랄드에이드", img:"logo.jpg", note:"청량한 색감과 상큼한 맛이 돋보이는 스파클링 에이드"},
    {name:"딸기라떼",       img:"logo.jpg", note:"생딸기로 만들어 더욱 깊은 맛"},
    {name:"말차딸기라떼",   img:"logo.jpg", note:"말차와 딸기의 조화"},
    {name:"딸기에이드",     img:"logo.jpg", note:"상큼함이 팡팡 딸기 에이드"}, // <-- 여기에 콤마(,)가 빠져 있었습니다.
    {name:"딸기블랙스무디", img:"logo.jpg", note:"진한 초콜릿과 달콤한 딸기가 어우러진 꾸덕한 스무디"}
  ];

  // ---- 해시/난수 생성 함수 ----
  function strHash(s){let h=2166136261>>>0;for(let i=0;i<s.length;i++){h^=s.charCodeAt(i);h=(h*16777619)>>>0;}return h>>>0;}
  function mulberry32(a){return function(){a|=0;a=a+0x6D2B79F5|0;let t=Math.imul(a^a>>>15,1|a);t=t+Math.imul(t^t>>>7,61|t)^t;return((t^t>>>14)>>>0)/4294967296;};}

  // 사용자 ID (브라우저 최초 접속 시 생성)
  let userId = localStorage.getItem("presentCoffeeUserId");
  if (!userId) {
    userId = Math.random().toString(36).slice(2,10);
    localStorage.setItem("presentCoffeeUserId", userId);
  }
  if (useShuffle) userId += "|shuffle|" + Math.random().toString(36).slice(2);

  // 시드 생성
  const makeRand = (label) => mulberry32(strHash(`${shop}|${todayStr}|${userId}|${label}`));
  const rFortune = makeRand("fortune");
  const rScore   = makeRand("score");
  const rKW      = makeRand("kw");
  const rDrink   = makeRand("drink");

  const pickFrom    = (arr, r) => arr[Math.floor(r()*arr.length)];
  const randIntFrom = (r,min,max)=> Math.floor(r()*(max-min+1))+min;

  // 확인코드 (하루 고정)
  const stableSeed = strHash(`${shop}|${todayStr}`);
  const dailyCode  = String((stableSeed % 1_000_000 + 1_000_000) % 1_000_000).padStart(6,'0');

  // ---- 데이터 선택 ----
  const fortune = pickFrom(fortunes, rFortune);
  const scores = [
    {label:"금전", val: randIntFrom(rScore, 70, 98)},
    {label:"직장", val: randIntFrom(rScore, 60, 95)},
    {label:"애정", val: randIntFrom(rScore, 65,100)},
    {label:"학업", val: randIntFrom(rScore, 60, 95)},
    {label:"건강", val: randIntFrom(rScore, 70, 99)},
  ];
  const kwNumber = randIntFrom(rKW, 1, 9);
  const kwDir    = pickFrom(directions,   rKW);
  const kwColor  = pickFrom(colorOptions, rKW);
  const kwFood   = pickFrom(foods,        rKW);
  const drink    = pickFrom(drinks,       rDrink);

  // ---- 유효기간 계산 (3일) ----
  const valid = new Date(Date.UTC(yyyy, Number(mm)-1, Number(dd)));
  valid.setUTCDate(valid.getUTCDate()+3);
  const vyyyy=valid.getUTCFullYear(), vmm=String(valid.getUTCMonth()+1).padStart(2,'0'), vdd=String(valid.getUTCDate()).padStart(2,'0');
  const validStr = `${vyyyy}-${vmm}-${vdd}`;

  // ---- DOM 렌더링 ----
  document.getElementById('fortuneText').textContent = fortune;
  document.getElementById('validUntil').textContent = `${validStr} 23:59`;
  document.getElementById('validUntil2').textContent = validStr;
  document.getElementById('dailyCode').textContent = dailyCode;

  document.getElementById('kwNumber').textContent = kwNumber;
  document.getElementById('kwDir').textContent    = kwDir;

  const colorEl = document.getElementById('kwColor');
  colorEl.innerHTML = ''; // 초기화
  const sw = document.createElement('span'); sw.className='swatch'; sw.style.background = kwColor.hex;
  const txt = document.createElement('span'); txt.textContent = kwColor.name;
  colorEl.appendChild(sw); colorEl.appendChild(txt);

  document.getElementById('kwFood').textContent = kwFood;

  document.getElementById('drinkName').textContent = drink.name;
  
  // 이미지 경로 설정 (실패 시 CSS에서 처리되거나 상단의 onerror가 작동)
  const imgEl = document.getElementById('drinkImg');
  imgEl.src = drink.img; 
  imgEl.alt = drink.name;
  
  document.getElementById('drinkNote').textContent = drink.note;

  document.getElementById('shopId').textContent = shop;
  document.getElementById('nowKST').textContent =
    `${todayStr} ${String(nowKST.getUTCHours()).padStart(2,'0')}:${String(nowKST.getUTCMinutes()).padStart(2,'0')}:${String(nowKST.getUTCSeconds()).padStart(2,'0')} (KST)`;

  // 점수 바 애니메이션
  const holder = document.getElementById('scores');
  holder.innerHTML = '';
  scores.forEach(s=>{
    const row = document.createElement('div'); row.className='row';
    row.innerHTML = `<div class="left"><div>${s.label}</div></div><div>${s.val}점</div>`;
    const bar  = document.createElement('div'); bar.className='bar';
    const fill = document.createElement('div'); fill.className='fill'; 
    // 애니메이션을 위해 setTimeout 사용
    setTimeout(() => { fill.style.width=`${s.val}%`; }, 100);
    bar.appendChild(fill);
    holder.appendChild(row); holder.appendChild(bar);
  });

  // 공유 기능
  const shareBtn = document.getElementById('shareBtn');
  const shareUrl = location.href;
  const shareText = `[현재의 공간] 오늘의 운세 ✨\n확인코드: ${dailyCode}\n유효기간: ${validStr} 23:59\n${shareUrl}`;
  
  shareBtn.addEventListener('click', async ()=>{
    if (navigator.share) {
      try{ await navigator.share({ title:"현재의 공간 — 오늘의 운세", text:shareText, url:shareUrl }); }catch(e){}
    } else {
      try{
        await navigator.clipboard.writeText(shareText);
        const originalText = shareBtn.textContent;
        shareBtn.textContent = "링크 복사 완료!";
        setTimeout(() => shareBtn.textContent = originalText, 1500);
      } catch {
        alert("브라우저가 공유 기능을 지원하지 않습니다.\n아래 주소를 복사해 주세요:\n\n"+shareUrl);
      }
    }
  });
})();
</script>
</body>
</html>
